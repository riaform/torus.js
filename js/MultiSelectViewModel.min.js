(function(){var b,a=function(c,d){return function(){return c.apply(d,arguments)}};b=(function(){c.name="MultiSelectViewModel";c.prototype.any=function(h,f){var g,d,e;for(d=0,e=h.length;d<e;d++){g=h[d];if(f(g)){return true}}return false};function c(m,j,k,h){var i,l,n,e,f,g=this;this.selection=m;this.keyfn=k;this.container=h;this.getSelection=a(this.getSelection,this);this.remove=a(this.remove,this);this.add=a(this.add,this);this.beforeRemoveTarget=a(this.beforeRemoveTarget,this);this.afterAddTarget=a(this.afterAddTarget,this);this.afterAddSource=a(this.afterAddSource,this);this.beforeRemoveSource=a(this.beforeRemoveSource,this);if(!this.container){this.container="body"}if(this.keyfn==null){this.keyfn=function(d){return JSON.stringify(d)}}this.source=ko.observableArray([]);i=[];for(e=0,f=j.length;e<f;e++){l=j[e];if(!this.any(this.selection(),function(d){return g.keyfn(d)===g.keyfn(l)})){this.source.push(l)}}this.targetLocations=[];this.addedElements=[];n=this;this.afterAddTargetElement=function(d,o,p){return n.afterAddTarget(d,o,p)};this.afterAddSourceElement=function(d,o,p){return n.afterAddSource(d,o,p)};this.beforeRemoveSourceElement=function(d,o,p){return n.beforeRemoveSource(d,o,p)};this.beforeRemoveTargetElement=function(d,o,p){return n.beforeRemoveTarget(d,o,p)};this.topOffset=$("body").offset()}c.prototype.beforeRemoveSource=function(i,f,g){var e,h,j,d=this;if(i.nodeType!==1){return}h=$(i).offset();j=this.targetLocations.pop();e=this.addedElements.pop();i.removeAttribute("data-bind");$(i).css("position","absolute").css("left",h.left).css("top",h.top);$(this.container).append($(i));return $(i).animate({left:j.left-this.topOffset.left,top:j.top-this.topOffset.top},500,"easeOutCubic",function(){$(i).remove();return $(e).css("visibility","visible")})};c.prototype.afterAddSource=function(j,g,h){var e,f,i,k,d=this;if(j.nodeType!==1){return}i=$(j).offset();k=this.targetLocations.pop();f=$(j).clone(false,false);$(f).css("position","absolute").css("left",k.left).css("top",k.top);$(this.container).append($(f));$(j).css("visibility","hidden");e=j;return $(f).animate({left:i.left-this.topOffset.left,top:i.top-this.topOffset.top},500,"easeOutCubic",function(){$(f).remove();return $(e).css("visibility","visible")})};c.prototype.afterAddTarget=function(f,g,h){var d,e=this;if(f.nodeType!==1){return}this.targetLocations.push($(f).offset());this.addedElements.push(f);$(f).css("visibility","hidden");d=h;return setTimeout((function(){return e.source.remove(d)}),0)};c.prototype.beforeRemoveTarget=function(f,g,h){var d,e=this;if(f.nodeType!==1){return}this.targetLocations.push($(f).offset());$(f).remove();d=h;return setTimeout((function(){return e.source.push(d)}),0)};c.prototype.add=function(d){return this.selection.push(d)};c.prototype.remove=function(d){return this.selection.remove(d)};c.prototype.getSelection=function(d){return this.selection()};return c})();this.MultiSelectViewModel=b}).call(this);