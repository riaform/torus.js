(function(){var b,a=function(c,d){return function(){return c.apply(d,arguments)}};b=(function(){c.name="MultiSelectViewModel";function c(k,g,h,f){var i,j,l,d,e;this.selection=k;this.keyfn=h;this.container=f;this.getSelection=a(this.getSelection,this);this.remove=a(this.remove,this);this.add=a(this.add,this);this.beforeRemoveTarget=a(this.beforeRemoveTarget,this);this.afterAddTarget=a(this.afterAddTarget,this);this.afterAddSource=a(this.afterAddSource,this);this.beforeRemoveSource=a(this.beforeRemoveSource,this);if(!this.container){this.container="body"}if(this.keyfn==null){this.keyfn=function(m){return JSON.stringify(m)}}this.source=ko.observableArray([]);for(d=0,e=g.length;d<e;d++){j=g[d];if(((function(){var m,n,o,p;o=this.selection;p=[];for(m=0,n=o.length;m<n;m++){i=o[m];if(this.keyfn(i)===this.keyfn(j)){p.push(i)}}return p}).call(this)).length===0){this.source.push(j)}}this.targetLocations=[];this.addedElements=[];l=this;this.afterAddTargetElement=function(m,n,o){return l.afterAddTarget(m,n,o)};this.afterAddSourceElement=function(m,n,o){return l.afterAddSource(m,n,o)};this.beforeRemoveSourceElement=function(m,n,o){return l.beforeRemoveSource(m,n,o)};this.beforeRemoveTargetElement=function(m,n,o){return l.beforeRemoveTarget(m,n,o)};this.topOffset=$("body").offset()}c.prototype.beforeRemoveSource=function(i,f,g){var e,h,j,d=this;if(i.nodeType!==1){return}h=$(i).offset();j=this.targetLocations.pop();e=this.addedElements.pop();i.removeAttribute("data-bind");$(i).css("position","absolute").css("left",h.left).css("top",h.top);$(this.container).append($(i));return $(i).animate({left:j.left-this.topOffset.left,top:j.top-this.topOffset.top},500,"easeOutCubic",function(){$(i).remove();return $(e).css("visibility","visible")})};c.prototype.afterAddSource=function(j,g,h){var e,f,i,k,d=this;if(j.nodeType!==1){return}i=$(j).offset();k=this.targetLocations.pop();f=$(j).clone(false,false);$(f).css("position","absolute").css("left",k.left).css("top",k.top);$(this.container).append($(f));$(j).css("visibility","hidden");e=j;return $(f).animate({left:i.left-this.topOffset.left,top:i.top-this.topOffset.top},500,"easeOutCubic",function(){$(f).remove();return $(e).css("visibility","visible")})};c.prototype.afterAddTarget=function(f,g,h){var d,e=this;if(f.nodeType!==1){return}this.targetLocations.push($(f).offset());this.addedElements.push(f);$(f).css("visibility","hidden");d=h;return setTimeout((function(){return e.source.remove(d)}),0)};c.prototype.beforeRemoveTarget=function(f,g,h){var d,e=this;if(f.nodeType!==1){return}this.targetLocations.push($(f).offset());$(f).remove();d=h;return setTimeout((function(){return e.source.push(d)}),0)};c.prototype.add=function(d){return this.selection.push(d)};c.prototype.remove=function(d){return this.selection.remove(d)};c.prototype.getSelection=function(d){return this.selection()};return c})();this.MultiSelectViewModel=b}).call(this);